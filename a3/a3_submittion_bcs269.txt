1.
Category (CategoryID, CategoryName, Description)
Tags(TagName)
ActivityLogs(LogID, UserID, ThreadID, ViewTime)
Ratings(RatingID, UserID, Rating)

Thread (ThreadID, ThreadName, IsPinned, IsAnnouncement, CreatedOn, PostCount)
Post (PostID, CreatedOn, ModiﬁedOn, Rating)
User(UserID,DisplayName,Email,Password,IsBanned,IsModerator,IsAdministrator,RegisteredOn, PostCount) 

3.
A composite key of post_id and user_id_rating

4.

a)
post_id -> topic_id
post_id -> topic_date
post_id -> post_date
post_id -> topic
post_id -> post
post_id -> category_id
post_id -> category
user_id_rating -> user_id
user_id_rating -> username
user_id_rating -> email
post_id,user_id_rating -> rating

b)
MasterTable(post_id,user_id_rating, topic_id,topic_date,post_date,topic	post,category_id,category,rating,user_id,username,email)
splits into:

Post(PostID, TopicID, Topic_date, topic, Post_date, Post, CategoryID, category)
User(User_id, username, email, user_id_rating, rating)

5.
a)
within the post table:
post_id -> topic_id -> topic_date
post_id -> topic_id -> topic
post_id -> category_id -> category

 
within the post table:
user_id_rating -> user_id -> username
user_id_rating -> user_id -> email

b)
Post(PostID, Post_date, Post, rating) 
Thread(ThreadID, ThreadName, IsPinned, IsAnnouncement, CreatedOn, PostCount, CategoryID) 
Topic(TopicID, Topic_date, Topic) 
Category(CategoryID, Category) 
User(UserID, Username, Email) 
Rating(RatingID, UserRatingID, Rating) 


6.
// Tags table
CREATE TABLE IF NOT EXISTS Tags (
Tagname TEXT PRIMARY KEY,
Description TEXT,
CreatedOn DATETIME
)

// Rating Table
CREATE TABLE IF NOT EXISTS Rating (
RatingID INTEGER PRIMARY KEY,
UserRatingID INTEGER REFERENCES User (UserID),
Rating INTEGER CHECK( Rating IN(0,1,-1)),
FOREIGN KEY (UserRatingID)
	REFERENCES User(UserID)
		ON DELETE CASCADE
)


// Category Table
CREATE TABLE IF NOT EXISTS Category (
CategoryID INTEGER PRIMARY KEY,
CategoryName TEXT NOT NULL UNIQUE,
Description TEXT
)


//Activity Log Table
CREATE TABLE IF NOT EXISTS ActivityLog (
LogID INTEGER PRIMARY KEY,
UserID INTEGER REFERENCES User (UserID),
ThreadID INTEGER REFERENCES Thread (ThreadID),
ViewTime DATETIME NOT NULL
)

//ThreadTags Table
// DBeaver gave me some trouble enforcing the foreign key constraints so I wrote 
// them (reduntantely) at the table and column level and it worked

PRAGMA foreign_keys = ON;
CREATE TABLE ThreadTags (
ThreadTagsID INTEGER PRIMARY KEY,
ThreadID INTEGER REFERENCES Thread (ThreadID),
TagName TEXT REFERENCES Tags (TagName),

FOREIGN KEY (ThreadID)
	REFERENCES Thread(ThreadID)
		ON DELETE CASCADE,

FOREIGN KEY (TagName)
	REFERENCES Tags(TagName)
		ON DELETE CASCADE
)

7.
